KCPSM6 Assembler log file for program 'D:\github\Embedded\Project\fir_filter_picoblaze_program.psm'.
Generated by KCPSM6 version v2.70
Ken Chapman - Xilinx Ltd - 16th May 2014

Assembly datestamp: 10 Dec 2018
Assembly timestamp: 18:14:54

Contents
  Assembly listing
  List of PSM files
  List of CONSTANTs
  List of TABLEs
  List of STRINGs
  List of line labels
  Instruction usage statistics


Last occupied address: 02D hex
Nominal program memory size: 1K (1024)   address(9:0)
Actual memory size: 4096
  (Default memory size)
Occupied memory locations: 46
Memory locations available: 4050


Assembly listing

 Addr Code                       Instruction

 000                             ; FIR Bandpass filter, 8-bit fixed point coefficients
 000                             ; Filter coefficients calculated using Parks–McClellan filter design algorithm
 000                             ; see: http://t-filter.engineerjs.com/
 000                             ; 0-200 Hz, gain -0, ripple/att = -40 db, actual ripple = -40.96 db
 000                             ; 300 Hz-500 Hz, gain - 1, ripple/att = 5 db, actual ripple = 3.72 db
 000                             ; 600 Hz-1000 Hz, gain- 0, ripple/att = -40 db, actual ripple = -40.96 db
 000                             ; Sampling frequency: 2000 Hz, taps=L=N+1= 27 (minimum)
 000                             ;#define SET_BITS(MYBITS,MYBITMASK)      ( (MYBITS) |= (MYBITMASK)  )
 000                             ;#define CLEAR_BITS(MYBITS,MYBITMASK)    ( (MYBITS) &= ~(MYBITMASK) )
 000                             ;#define TOGGLE_BITS(MYBITS,MYBITMASK)   ( (MYBITS) ^= (MYBITMASK)  )
 000                             ;#define IS_BIT_SET(MYBITS,MYBITMASK)    ( (MYBITS) &  (MYBITMASK)  )
 000                             ; constants
 000                             CONSTANT COEFF_CNT, 27'd
 000                             CONSTANT NIBBLE_MSK, 00001111'b
 000                             CONSTANT IS_VALID, 00000010'b                     ; 1th bit: valid(when device is source)
 000                             CONSTANT IS_READY, 00000001'b                     ; 0th bit: ready(when device is sink)
 000                             CONSTANT IS_STARTED, 00
 000                             CONSTANT IS_FINISHED, FF
 000                             ; input ports (pico is sink and fpga is source)
 000                             CONSTANT IN_COEFF_HANDSHAKE_PORT, 00              ; only ready to rcv H signal
 000                             CONSTANT IN_X_HANDSHAKE_PORT, 01                  ; only ready to rcv X  signal
 000                             CONSTANT IN_Y_HANDSHAKE_PORT, 02                  ; only sending valid Y signal
 000                             CONSTANT IN_Y_PORT_0, 03                          ; [7:0]  = [7:0]
 000                             CONSTANT IN_Y_PORT_1, 04                          ; [15:0] = [7:0]
 000                             CONSTANT IN_Y_PORT_2, 05                          ; [19:16] = [3:0]
 000                             ; output ports (pico is source and fpga is sink)
 000                             CONSTANT OUT_COEFF_HANDSHAKE_PORT, 00             ; only sending valid H signal; hybrid port
 000                             CONSTANT OUT_COEFF_PORT, 01                       ;
 000                             CONSTANT OUT_X_HANDSHAKE_PORT, 02                 ; only sending valid X signal; hybrid port
 000                             CONSTANT OUT_X_PORT, 03                           ;
 000                             CONSTANT OUT_Y_HANDSHAKE_PORT, 04                 ; only ready to rcv Y signal; hybrid port
 000                             ; pulses
 000                             TABLE POS_PULSE#, [00,01,00]                      ; 2cc+2cc+2cc
 000                             TABLE NEG_PULSE#, [01,00,01]                      ; 2cc+2cc+2cc
 000                             ; 27 coefficients (8-bit signed in 2's compliment)
 000                             TABLE COEFF_HEX_ARRAY#, [01,02,FF,FE,00,FF,FC,03,0F,07,EA,E6,0B,24,0B,E6,EA,07,0F,03,FC,FF,00,FE,FF,02,01]
 000                             CONSTANT COEFF0, 01
 000                             CONSTANT COEFF1, 02
 000                             CONSTANT COEFF2, FF
 000                             CONSTANT COEFF3, FE
 000                             CONSTANT COEFF4, 00
 000                             CONSTANT COEFF5, FF
 000                             CONSTANT COEFF6, FC
 000                             CONSTANT COEFF7, 03
 000                             CONSTANT COEFF8, 0F
 000                             CONSTANT COEFF9, 07
 000                             CONSTANT COEFF10, EA
 000                             CONSTANT COEFF11, E6
 000                             CONSTANT COEFF12, 0B
 000                             CONSTANT COEFF13, 24
 000                             CONSTANT COEFF14, 0B
 000                             CONSTANT COEFF15, E6
 000                             CONSTANT COEFF16, EA
 000                             CONSTANT COEFF17, 07
 000                             CONSTANT COEFF18, 0F
 000                             CONSTANT COEFF19, 03
 000                             CONSTANT COEFF20, FC
 000                             CONSTANT COEFF21, FF
 000                             CONSTANT COEFF22, 00
 000                             CONSTANT COEFF23, FE
 000                             CONSTANT COEFF24, FF
 000                             CONSTANT COEFF25, 02
 000                             CONSTANT COEFF26, 01
 000                             ; X samples (8-bit signed in 2's compliment)
 000                             ; matlab code
 000                             ; f1=100;
 000                             ; f2=400;
 000                             ; f3=800;
 000                             ; Fs = 2000;
 000                             ; t = 0:1/Fs:1;
 000                             ; x = cos(2*pi*f1*t)+cos(2*pi*f2*t)+cos(2*pi*f3*t);
 000                             ;TABLE X_SAMPLES_ARRAY#, [1,2,3,4,5,6,7,8,9]
 000                             TABLE X_SAMPLES_ARRAY#, [01,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00] ; impulse input should produce coefficients
 000  01F00               start: LOAD sF, 00[IS_STARTED]                           ; IS_STARTED=00 indicates that no coefficient has been sent so far
 001  01B00                      LOAD sB, 00[COEFFS'upper]
 002  01A12                      LOAD sA, 12[COEFFS'lower]
 003  20005                      CALL 005[send_coeffs]
 004  2202E                      JUMP 02E[end]
 005  24BA0         send_coeffs: CALL@ (sB, sA)
 006  1DFFF                      COMPARE sF, FF[IS_FINISHED]                       ; IS_FINISHED = FF indicates the process has finished
 007  31000                      RETURN Z
 008  2000C                      CALL 00C[send_coeff_to_fpga]
 009  11A01                      ADD sA, 01
 00A  13B00                      ADDCY sB, 00
 00B  22005                      JUMP 005[send_coeffs]
 00C  09000  send_coeff_to_fpga: INPUT s0, 00[IN_COEFF_HANDSHAKE_PORT]
 00D  0D001                      TEST s0, 01[IS_READY]                             ; ‘C’ flag is set if the corresponding bit in ‘sX’ is ‘1’ and the ‘Z’ flag is set if tested bit is ‘0’.
 00E  3200C                      JUMP Z, 00C[send_coeff_to_fpga]                   ; if( fpga is not ready to receive) then JUMP send_coeff_to_fpga
 00F  2B020                      OUTPUTK 02[IS_VALID], 0[OUT_COEFF_HANDSHAKE_PORT] ; assert valid(as source) signal for coefficient
 010  2D101                      OUTPUT s1, 01[OUT_COEFF_PORT]                     ; send the constant coefficient
 011  25000                      RETURN 
 012  21101              COEFFS: LOAD&RETURN s1, 01[COEFF_HEX_ARRAY#:01]
 013  21102                      LOAD&RETURN s1, 02[COEFF_HEX_ARRAY#:02]
 014  211FF                      LOAD&RETURN s1, FF[COEFF_HEX_ARRAY#:FF]
 015  211FE                      LOAD&RETURN s1, FE[COEFF_HEX_ARRAY#:FE]
 016  21100                      LOAD&RETURN s1, 00[COEFF_HEX_ARRAY#:00]
 017  211FF                      LOAD&RETURN s1, FF[COEFF_HEX_ARRAY#:FF]
 018  211FC                      LOAD&RETURN s1, FC[COEFF_HEX_ARRAY#:FC]
 019  21103                      LOAD&RETURN s1, 03[COEFF_HEX_ARRAY#:03]
 01A  2110F                      LOAD&RETURN s1, 0F[COEFF_HEX_ARRAY#:0F]
 01B  21107                      LOAD&RETURN s1, 07[COEFF_HEX_ARRAY#:07]
 01C  211EA                      LOAD&RETURN s1, EA[COEFF_HEX_ARRAY#:EA]
 01D  211E6                      LOAD&RETURN s1, E6[COEFF_HEX_ARRAY#:E6]
 01E  2110B                      LOAD&RETURN s1, 0B[COEFF_HEX_ARRAY#:0B]
 01F  21124                      LOAD&RETURN s1, 24[COEFF_HEX_ARRAY#:24]
 020  2110B                      LOAD&RETURN s1, 0B[COEFF_HEX_ARRAY#:0B]
 021  211E6                      LOAD&RETURN s1, E6[COEFF_HEX_ARRAY#:E6]
 022  211EA                      LOAD&RETURN s1, EA[COEFF_HEX_ARRAY#:EA]
 023  21107                      LOAD&RETURN s1, 07[COEFF_HEX_ARRAY#:07]
 024  2110F                      LOAD&RETURN s1, 0F[COEFF_HEX_ARRAY#:0F]
 025  21103                      LOAD&RETURN s1, 03[COEFF_HEX_ARRAY#:03]
 026  211FC                      LOAD&RETURN s1, FC[COEFF_HEX_ARRAY#:FC]
 027  211FF                      LOAD&RETURN s1, FF[COEFF_HEX_ARRAY#:FF]
 028  21100                      LOAD&RETURN s1, 00[COEFF_HEX_ARRAY#:00]
 029  211FE                      LOAD&RETURN s1, FE[COEFF_HEX_ARRAY#:FE]
 02A  211FF                      LOAD&RETURN s1, FF[COEFF_HEX_ARRAY#:FF]
 02B  21102                      LOAD&RETURN s1, 02[COEFF_HEX_ARRAY#:02]
 02C  21101                      LOAD&RETURN s1, 01[COEFF_HEX_ARRAY#:01]
 02D  21FFF                      LOAD&RETURN sF, FF[IS_FINISHED]                   ;  ; IS_FINISHED = FF indicates process has finished (when all coefficients are sent)
 02E                        end: 


All unused memory locations contain zero (equivalent to 'LOAD s0, s0')



List of PSM files that have been assembled

D:\github\Embedded\Project\fir_filter_picoblaze_program.psm



List of defined constants

 CONSTANT name            Value        Source PSM File

 timestamp_hours          18'd         
 timestamp_minutes        14'd         
 timestamp_seconds        54'd         
 datestamp_year           18'd         
 datestamp_month          12'd         
 datestamp_day            10'd         
 NUL                      00           
 BEL                      07           
 BS                       08           
 HT                       09           
 LF                       0A           
 VT                       0B           
 CR                       0D           
 ESC                      1B           
 DEL                      7F           
 DCS                      90           
 ST                       9C           
 COEFF_CNT                27'd         fir_filter_picoblaze_program.psm
 NIBBLE_MSK               00001111'b   fir_filter_picoblaze_program.psm
 IS_VALID                 00000010'b   fir_filter_picoblaze_program.psm
 IS_READY                 00000001'b   fir_filter_picoblaze_program.psm
 IS_STARTED               00           fir_filter_picoblaze_program.psm
 IS_FINISHED              FF           fir_filter_picoblaze_program.psm
 IN_COEFF_HANDSHAKE_PORT  00           fir_filter_picoblaze_program.psm
 IN_X_HANDSHAKE_PORT      01           fir_filter_picoblaze_program.psm
 IN_Y_HANDSHAKE_PORT      02           fir_filter_picoblaze_program.psm
 IN_Y_PORT_0              03           fir_filter_picoblaze_program.psm
 IN_Y_PORT_1              04           fir_filter_picoblaze_program.psm
 IN_Y_PORT_2              05           fir_filter_picoblaze_program.psm
 OUT_COEFF_HANDSHAKE_PORT 00           fir_filter_picoblaze_program.psm
 OUT_COEFF_PORT           01           fir_filter_picoblaze_program.psm
 OUT_X_HANDSHAKE_PORT     02           fir_filter_picoblaze_program.psm
 OUT_X_PORT               03           fir_filter_picoblaze_program.psm
 OUT_Y_HANDSHAKE_PORT     04           fir_filter_picoblaze_program.psm
 COEFF0                   01           fir_filter_picoblaze_program.psm
 COEFF1                   02           fir_filter_picoblaze_program.psm
 COEFF2                   FF           fir_filter_picoblaze_program.psm
 COEFF3                   FE           fir_filter_picoblaze_program.psm
 COEFF4                   00           fir_filter_picoblaze_program.psm
 COEFF5                   FF           fir_filter_picoblaze_program.psm
 COEFF6                   FC           fir_filter_picoblaze_program.psm
 COEFF7                   03           fir_filter_picoblaze_program.psm
 COEFF8                   0F           fir_filter_picoblaze_program.psm
 COEFF9                   07           fir_filter_picoblaze_program.psm
 COEFF10                  EA           fir_filter_picoblaze_program.psm
 COEFF11                  E6           fir_filter_picoblaze_program.psm
 COEFF12                  0B           fir_filter_picoblaze_program.psm
 COEFF13                  24           fir_filter_picoblaze_program.psm
 COEFF14                  0B           fir_filter_picoblaze_program.psm
 COEFF15                  E6           fir_filter_picoblaze_program.psm
 COEFF16                  EA           fir_filter_picoblaze_program.psm
 COEFF17                  07           fir_filter_picoblaze_program.psm
 COEFF18                  0F           fir_filter_picoblaze_program.psm
 COEFF19                  03           fir_filter_picoblaze_program.psm
 COEFF20                  FC           fir_filter_picoblaze_program.psm
 COEFF21                  FF           fir_filter_picoblaze_program.psm
 COEFF22                  00           fir_filter_picoblaze_program.psm
 COEFF23                  FE           fir_filter_picoblaze_program.psm
 COEFF24                  FF           fir_filter_picoblaze_program.psm
 COEFF25                  02           fir_filter_picoblaze_program.psm
 COEFF26                  01           fir_filter_picoblaze_program.psm



List of defined tables

 TABLE name         Table                                                                                  Source PSM File

 POS_PULSE#         [00,01,00]                                                                             fir_filter_picoblaze_program.psm
 NEG_PULSE#         [01,00,01]                                                                             fir_filter_picoblaze_program.psm
 COEFF_HEX_ARRAY#   [01,02,FF,FE,00,FF,FC,03,0F,07,EA,E6,0B,24,0B,E6,EA,07,0F,03,FC,FF,00,FE,FF,02,01]     fir_filter_picoblaze_program.psm
 X_SAMPLES_ARRAY#   [01,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00]  fir_filter_picoblaze_program.psm



List of text strings

 STRING name       String         Source PSM File

 KCPSM6_version$   "v2.70"        
 datestamp$        "10 Dec 2018"  
 timestamp$        "18:14:54"     



List of line labels

   Label                Addr  Source PSM File

 * start                000   fir_filter_picoblaze_program.psm
   send_coeffs          005   fir_filter_picoblaze_program.psm
   send_coeff_to_fpga   00C   fir_filter_picoblaze_program.psm
   COEFFS               012   fir_filter_picoblaze_program.psm
   end                  02E   fir_filter_picoblaze_program.psm

      * Line label has not been referenced in any instructions.
        Hint - This may indicate unused code that could be
               removed to reduce the size of this program.



Instruction usage statistics

 Instruction    Instances

 LOAD              3
 STAR              -

 AND               -
 OR                -
 XOR               -

 ADD               1
 ADDCY             1
 SUB               -
 SUBCY             -

 TEST              1
 TESTCY            -
 COMPARE           1
 COMPARECY         -

 SL0               -
 SL1               -
 SLX               -
 SLA               -
 RL                -
 SR0               -
 SR1               -
 SRX               -
 SRA               -
 RR                -

 REGBANK           -

 INPUT             1
 OUTPUT            1
 OUTPUTK           1

 STORE             -
 FETCH             -

 DISABLE           -
 ENABLE            -
 RETURNI           -

 JUMP              3
 JUMP@             -
 CALL              2
 CALL@             1
 RETURN            2
 LOAD&RETURN      28

 HWBUILD           -



End of KCPSM6 log file.
